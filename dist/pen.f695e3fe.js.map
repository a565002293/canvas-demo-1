{"version":3,"sources":["pen.js"],"names":["canvas","document","getElementById","ctx","getContext","lineWidth","lineCap","autoSetCanvasSize","listenToMouse","eraserEnable","eraser","onclick","classList","add","brush","remove","black","fillStyle","strokeStyle","red","yellow","green","blue","clear","clearRect","width","height","big","middle","small","download","url","toDataURL","console","log","a","createElement","body","appendChild","href","target","click","usingMouse","lastPoint","undefined","ontouchstart","x","touches","clientX","y","clientY","ontouchmove","newPoint","drawLine","ontouchend","onmousedown","onmousemove","onmouseup","drawPoint","radius","beginPath","arc","Math","PI","fill","x1","y1","x2","y2","moveTo","lineTo","stroke","closePath","resize","window","onresize","pageWidth","documentElement","clientWidth","pageHeight","clientHeight"],"mappings":"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","file":"pen.f695e3fe.js","sourceRoot":"..","sourcesContent":["\r\nvar canvas = document.getElementById('canvas')\r\nvar ctx = canvas.getContext('2d')\r\nvar lineWidth = 8\r\nctx.lineCap = \"round\"\r\n\r\nautoSetCanvasSize(canvas)\r\nlistenToMouse(canvas)\r\n\r\nvar eraserEnable = false   //橡皮擦画笔切换\r\neraser.onclick = function () {\r\n    eraserEnable = true\r\n    eraser.classList.add('active')\r\n    brush.classList.remove('active')\r\n}\r\nbrush.onclick = function () {\r\n    eraserEnable = false\r\n    brush.classList.add('active')\r\n    eraser.classList.remove('active')\r\n}\r\n\r\nblack.onclick = function () {\r\n    ctx.fillStyle = 'black'\r\n    ctx.strokeStyle = 'black'\r\n    black.classList.add('active')\r\n    red.classList.remove('active')\r\n    yellow.classList.remove('active')\r\n    green.classList.remove('active')\r\n    blue.classList.remove('active')\r\n    ctx.lineCap = \"round\"\r\n\r\n}\r\nred.onclick = function () {\r\n    ctx.fillStyle = 'red'\r\n    ctx.strokeStyle = 'red'\r\n    black.classList.remove('active')\r\n    red.classList.add('active')\r\n    yellow.classList.remove('active')\r\n    green.classList.remove('active')\r\n    blue.classList.remove('active')\r\n}\r\nyellow.onclick = function () {\r\n    ctx.fillStyle = 'yellow'\r\n    ctx.strokeStyle = 'yellow'\r\n    black.classList.remove('active')\r\n    red.classList.remove('active')\r\n    yellow.classList.add('active')\r\n    green.classList.remove('active')\r\n    blue.classList.remove('active')\r\n}\r\ngreen.onclick = function () {\r\n    ctx.fillStyle = 'green'\r\n    ctx.strokeStyle = 'green'\r\n    black.classList.remove('active')\r\n    red.classList.remove('active')\r\n    yellow.classList.remove('active')\r\n    green.classList.add('active')\r\n    blue.classList.remove('active')\r\n}\r\nblue.onclick = function () {\r\n    ctx.fillStyle = 'blue'\r\n    ctx.strokeStyle = 'blue'\r\n    black.classList.remove('active')\r\n    red.classList.remove('active')\r\n    yellow.classList.remove('active')\r\n    green.classList.remove('active')\r\n    blue.classList.add('active')\r\n}\r\nclear.onclick = function () {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n}\r\n\r\nbig.onclick = function () {\r\n    lineWidth = 8\r\n    big.classList.add('active')\r\n    middle.classList.remove('active')\r\n    small.classList.remove('active')\r\n}\r\nmiddle.onclick = function () {\r\n    lineWidth = 5\r\n    big.classList.remove('active')\r\n    middle.classList.add('active')\r\n    small.classList.remove('active')\r\n}\r\nsmall.onclick = function () {\r\n    lineWidth = 2\r\n    big.classList.remove('active')\r\n    middle.classList.remove('active')\r\n    small.classList.add('active')\r\n}\r\n\r\ndownload.onclick = function () {\r\n    var url = canvas.toDataURL(\"image/png\")\r\n    console.log(url)\r\n    var a = document.createElement('a')\r\n    document.body.appendChild(a)\r\n    a.href = url\r\n    a.download = 'canvas画板.png'\r\n    a.target = '_blank'\r\n    a.click()\r\n}\r\nfunction listenToMouse(canvas) {\r\n    var usingMouse = false //鼠标触发时间默认设置false\r\n    var lastPoint = { 'x': undefined, 'y': undefined } //鼠标最后点击的点坐标初始化\r\n\r\n    if (document.body.ontouchstart !== undefined) {  //判断设备是否支持touch事件\r\n\r\n        canvas.ontouchstart = function (a) { //touch开始\r\n            console.log(a)\r\n            var x = a.touches[0].clientX\r\n            var y = a.touches[0].clientY\r\n            usingMouse = true\r\n            if (eraserEnable) {\r\n                ctx.clearRect(x - 25, y - 25, 50, 50);\r\n            }\r\n            else {\r\n                lastPoint = { 'x': x, 'y': y }\r\n            }\r\n        }\r\n        canvas.ontouchmove = function (a) {  //touch移动\r\n            var x = a.touches[0].clientX\r\n            var y = a.touches[0].clientY\r\n            if (!usingMouse) { return }\r\n\r\n            if (eraserEnable) {\r\n                ctx.clearRect(x - 10, y - 10, 20, 20);\r\n            }\r\n            else {\r\n                var newPoint = { 'x': x, 'y': y }\r\n                drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y)\r\n                lastPoint = newPoint\r\n            }\r\n        }\r\n        canvas.ontouchend = function () {  //touch结束\r\n            usingMouse = false\r\n        }\r\n    }\r\n    else {                                 //如果不支持touch事件，则执行鼠标事件\r\n        canvas.onmousedown = function (a) { //鼠标按下事件\r\n            var x = a.clientX\r\n            var y = a.clientY\r\n            usingMouse = true\r\n            if (eraserEnable) {\r\n                ctx.clearRect(x - 10, y - 10, 20, 20);\r\n            }\r\n            else {\r\n                lastPoint = { 'x': x, 'y': y }\r\n                // drawPoint(x,y,1)\r\n            }\r\n        }\r\n        canvas.onmousemove = function (a) {  //鼠标移动事件\r\n            var x = a.clientX\r\n            var y = a.clientY\r\n            if (!usingMouse) { return }\r\n\r\n            if (eraserEnable) {\r\n                ctx.clearRect(x - 10, y - 10, 20, 20);\r\n            }\r\n            else {\r\n                var newPoint = { 'x': x, 'y': y }\r\n                // drawPoint(x,y,1)\r\n                drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y)\r\n                lastPoint = newPoint\r\n            }\r\n        }\r\n        canvas.onmouseup = function () {  //鼠标松开事件\r\n            usingMouse = false\r\n        }\r\n    }\r\n}\r\n\r\nfunction drawPoint(x, y, radius) {\r\n    ctx.beginPath()\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2)\r\n    ctx.fill()\r\n}\r\n\r\nfunction drawLine(x1, y1, x2, y2) {\r\n    ctx.beginPath()\r\n    ctx.moveTo(x1, y1)\r\n    ctx.lineWidth = lineWidth\r\n    ctx.lineTo(x2, y2)\r\n    ctx.stroke()\r\n    ctx.closePath()\r\n}\r\n\r\nfunction autoSetCanvasSize(canvas) { //全屏函数\r\n    resize()\r\n    window.onresize = function () {\r\n        resize()\r\n    }\r\n    function resize() {\r\n        var pageWidth = document.documentElement.clientWidth\r\n        var pageHeight = document.documentElement.clientHeight\r\n        canvas.width = pageWidth\r\n        canvas.height = pageHeight\r\n    }\r\n}"]}